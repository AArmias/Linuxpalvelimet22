# h6 - DJ Prod

Alla kuudennen kotitehtävän palautus. Tehtävä tehty 4.10.2022 omalla henkilökohtaisella koneellani.

Pääkone:

- Windows 10 Pro 
- 32GB RAM 
- 2TB levytilaa 

Virtuaalikoneen kokoonpano:

- Oracle VirtualBox 6.1.36 
- Ubuntu 22.04.1 
- Apache 2 
- 8192MB RAM 
- 25GB levytilaa

Lisäksi: 

- Pilvipalvelin vuokrattu DigitalOceanista. 
- Nimipalvelu hankittu Name.comista 
- Käytetty apuna Github Educationin etuja ja alennuksia. 

------------------------------------------------------

### a) Tee tuotantotyyppinen asennus Djangosta. ###

Kotitehtävässä h4 hankittiin oma palvelin ja asennettiin tuolle palvelimelle apache, sekä laitettiin se toimimaan. Tätä tehtävää aloittaessa apacahe siis toimii jo valmiiksi omalla palvelimellani. Tuon tehtävän voit katsoa tästä, mikäli tarvitset apua palvelimen hankintaan, käyttöönottoon ja apachen asentamiseen. https://github.com/AArmias/Linuxpalvelimet22/blob/main/h4.md

Tämä tehtävä aloitetaan siis kohdasta, jossa meillä on jo toimiva webpalvelin. Ensimmäinen vaihe on kirjautua omalle palvelimelle: `ssh teros @159.223.29.233` ja salasana perään, päivittää totutusti viimeisimmät paketit ja päivitykset käyttöön: `sudo apt-get update` ja `sudo apt-get upgrade`, sekä lisätä tulevalle sisällölle uusi hakemisto ja luoda hakemistoon index.html kansio: `cd` (varmistetaan sijainti), `mkdir -p publicwsgi/teros/static/ `luodaan **publicwsgi/teroco/static/** niminen hakemisto ja sinne käskyllä `"Statically see you at Autaarmias.live !"|tee publicwsgi/teros/static/index.html` index.html tiedosto joka pitää sisällään tekstin **"Statically see you at Autaarmias.live !"**

![image](https://user-images.githubusercontent.com/102689055/193870460-b331d4dd-c0ee-4401-9d32-4d7dc73ac913.png)

Tämän jälkeen luodaan uusi virtuaalihosti apachelle, jotta tuleva webapp saadaan toimimaan. Tämä onnistuu käyskyllä `sudoedit /etc/apache2/sites-available/teros.conf`
Ja editoriin syötetään kuvan mukaisesti tiedot omasta kotihakemistosta.

![image](https://user-images.githubusercontent.com/102689055/193873195-ad115ec3-f849-4c6c-8665-c22fcb9d2d51.png)

Otetaan hosti käyttöön käskyllä `sudo a2ensite teros.conf`
ja otetaan pois käytöstä **000-default.conf** tiedosto käskyllä `sudo a2dissite 000-default.conf` (mikäli tämä unohtuu, homma ei toimi) 

ja kokeillaan toimivuutta käskyllä: `/sbin/apache2ctl configtest`

![image](https://user-images.githubusercontent.com/102689055/193877690-e6fdfc74-0825-42c1-9f89-3e30081cef99.png)

Toimii!  

Nyt on aika käynnistää apache uudelleen ja tarkistaa, toimiiko tuo static sivu sen jälkeen. 
`sudo systemctl restart apache2` käynnistää apachen uudelleen. 
Käskyllä `curl http://localhost/static/` nähdään toimiiko static sivu. 

![image](https://user-images.githubusercontent.com/102689055/193883510-ad99eee5-7c06-48dc-98d4-701074a80f03.png)

Sivu toimii! Tästä voidaan todeta, että kaikki ylemänä tehdyt toimempiteet toimivat. Aika mennä eteenpäin! 





